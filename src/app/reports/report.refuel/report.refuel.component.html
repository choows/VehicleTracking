<ActionBar title="Refuel" class="action-bar">
    <NavigationButton text="Go Back" android.systemIcon="ic_menu_back" (tap)="onNavBack()"></NavigationButton>
</ActionBar>
<!--




	Better to use raddataform to do the form instead of setting like this. 
-->
<GridLayout class="Form">
    <ScrollView *ngIf="!currentGeoLocation">
        <StackLayout>
            <!--
		<FlexboxLayout class="Form_container" flexDirection="column">
			<Label text="Date" class="Main_Label"></Label>
			<Button text="Date" (tap)="showDate()"></Button>
		</FlexboxLayout>
	
		<FlexboxLayout class="Form_container" flexDirection="column">
				<Label text="Time" class="Main_Label"></Label>"
				<button text="Time" (tap)="showTime()"></button>
			</FlexboxLayout>

		<FlexboxLayout class="Form_container" flexDirection="column">
				<Label text="Fuel Type" class="Main_Label"></Label>
				<ListPicker class="picker" [items]="fueltype" (selectedIndexChange)="selectedtype($event)"></ListPicker>
		</FlexboxLayout> 

		<FlexboxLayout class="Form_container"flexDirection="column">
				<Label text="Amount Paid" class="Main_Label"></Label>
				<br><br>
				<FlexboxLayout class="detail-container-box">
						<Label text="RM" class="sub-label"></Label>
						<TextField class="textfield" returnKeyType="done" hint="0.00" keyboardType="number" [(ngModel)]="fuelAmount" class="textfield" (blur)="ontextchange()"></TextField>
				</FlexboxLayout>
		</FlexboxLayout>

		<FlexboxLayout class="Form_container" flexDirection="column">
				<Label text="Fuel Price" class="Main_Label"></Label>
				<FlexboxLayout margin-top="5" margin-bottom="5" class="detail-container-box">
						<Label [text]="fuelPrice" class="sub-label"></Label>
						<Label text="MYR / Litre" class="sub-label"></Label>
				</FlexboxLayout>
		</FlexboxLayout>

		<FlexboxLayout class="Form_container" flexDirection="column">
				<Label text="Total Volume" class="Main_Label"></Label>
				<FlexboxLayout class="detail-container-box">
				<Label [text]="fuelVolume" class="sub-label"></Label>
				<Label text="Litre" class="sub-label"></Label>
				</FlexboxLayout>
		</FlexboxLayout>

		<FlexboxLayout class="Form_container" flexDirection="column">
				<Label text="Location" class="Main_Label"></Label>
				<Button text="Set Current location" (tap)="enableLocationServices()" *ngIf="!currentGeoLocation"></Button>
		</FlexboxLayout>

		<FlexboxLayout class="Form_container" flexDirection="column">
				<Label class="Main_Label" text="Odometer"></Label>
				<FlexboxLayout class="detail-container-box">
				<TextField class="textfield" [(ngModel)]="Odometer" keyboardType="number" [hint]="Odo_hint"></TextField>
				<Label class="sub-label" text="KM"></Label>
				</FlexboxLayout>
		</FlexboxLayout>

		<FlexboxLayout class="Form_container" flexDirection="column">
				<Label class="Main_Label" text="Note"></Label>
				<TextView [(ngModel)]="note" editable="true" class="textview" (blur)="onBlur($event)"></TextView>
		</FlexboxLayout>

		<FlexboxLayout class="Form_container" flexDirection="column">
				<Label class="Main_Label" text="Image"></Label>
				<Image *ngIf="image" [src]="image" class="image"></Image>
				<Button *ngIf="!image" text="Take Photo" (tap)="onTakePicture()" class="photo_button"></Button>
				<Button *ngIf="!image" text="Library" (tap)="onPick()" class="photo_button"></Button>
		</FlexboxLayout>
		<FlexboxLayout class="Form_container" >
			<Button class="submit_button" (tap)="validation()" text="SAVE"></Button>
		</FlexboxLayout>
	-->
            <RadDataForm tkExampleTitle tkToggleNavButton [source]="report" validationMode="OnLostFocus" (propertyValidate)="onPropertyValidate($event)">
                <TKPropertyGroup tkDataFormGroups collapsible="true" name="Date & Time">
                    <TKEntityProperty tkPropertyGroupProperties name="date" displayName="Date">
                        <TKPropertyEditor tkEntityPropertyEditor type="DatePicker"></TKPropertyEditor>
                    </TKEntityProperty>
                    <TKEntityProperty tkPropertyGroupProperties name="time" displayName="Time">
                        <TKPropertyEditor tkEntityPropertyEditor type="TimePicker"></TKPropertyEditor>
                    </TKEntityProperty>
                </TKPropertyGroup>
                <TKPropertyGroup tkDataFormGroups collapsible="true" name="Fuel Detail">
                    <TKEntityProperty tkPropertyGroupProperties name="fuel_type" displayName="Fuel Type" [valuesProvider]="fueltype">
                        <TKPropertyEditor tkEntityPropertyEditor type="SegmentedEditor"></TKPropertyEditor>
                    </TKEntityProperty>
                    <TKEntityProperty tkPropertyGroupProperties name="Fuel_price">
                        <TKPropertyEditor tkEntityPropertyEditor type="Label"></TKPropertyEditor>
                    </TKEntityProperty>
                    <TKEntityProperty tkPropertyGroupProperties name="Fuel_Volume">
                        <TKPropertyEditor tkEntityPropertyEditor type="Label"></TKPropertyEditor>
                    </TKEntityProperty>
                    <TKEntityProperty tkPropertyGroupProperties name="Amount">
                        <TKPropertyEditor tkEntityPropertyEditor type="Decimal"></TKPropertyEditor>
                    </TKEntityProperty>
                </TKPropertyGroup>
                <TKPropertyGroup tkDataFormGroups collapsible="true" name="Others">
                    <TKEntityProperty tkPropertyGroupProperties name="odometer"></TKEntityProperty>
                    <TKEntityProperty tkPropertyGroupProperties name="note"></TKEntityProperty>
                </TKPropertyGroup>
            </RadDataForm>
            <Button text="Set Current location" (tap)="enableLocationServices()" *ngIf="!currentGeoLocation"></Button>
            <Button text="Photo" (tap)="Photo()" class="photo_button"></Button>
            <Button class="submit_button" (tap)="validation()" text="SAVE"></Button>
        </StackLayout>
    </ScrollView>
    <FlexboxLayout flexDirection="column" *ngIf="currentGeoLocation" class="MapView">
        <MapView class="Map" (cameraChanged)="onCameraChanged($event)" (coordinateTapped)="onCoordinateTapped($event)" (mapReady)="onMapReady($event)" [zoom]="zoom" [latitude]="latitude" [longitude]="longitude" mapAnimationsEnabled="true"></MapView>
        <Button class="coordinate_submit_button" text="Done" (tap)="disableMap()"></Button>
    </FlexboxLayout>
    <ActivityIndicator row="1" #activityIndicator [busy]="onbusy" width="100" height="100" class="activity-indicator"></ActivityIndicator>
</GridLayout>